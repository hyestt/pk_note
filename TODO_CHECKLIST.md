# 德州撲克手牌記錄 iOS App - 離線優先 Todo Checklist

## 🏗️ **項目架構設置**
- [ ] 創建新的iOS項目 (SwiftUI + MVVM架構)
- [ ] 配置Bundle ID和Team設置
- [ ] 設置最低iOS版本 (iOS 15.0+)
- [ ] 集成SQLite.swift (本地數據庫 - 離線優先)
- [ ] 集成RevenueCat SDK (訂閱管理 - 僅訂閱驗證需網絡)
- [ ] 集成Firebase SDK (Analytics - 可離線緩存)
- [ ] 配置離線數據同步策略

## 📱 **核心功能模組 (離線優先)**

### **1. 本地數據庫模組 (SQLite - 完全離線)**
- [ ] 設計數據庫Schema
  - [ ] Sessions表 (session_id, date, location, buy_in, cash_out等)
  - [ ] Hands表 (hand_id, session_id, position, cards, board等)
  - [ ] Settings表 (用戶偏好設置)
  - [ ] Analytics_Cache表 (離線分析數據緩存)
- [ ] 實現DatabaseManager類
- [ ] CRUD操作封裝
- [ ] 數據遷移邏輯
- [ ] 數據備份/恢復功能 (本地文件)

### **2. 訂閱管理模組 (離線友好)**
- [ ] 設置RevenueCat配置
- [ ] 實現Premium訂閱頁面UI
- [ ] 月費$9.99訂閱邏輯
- [ ] 離線訂閱狀態緩存
- [ ] 免費版功能限制 (本地檢查)
- [ ] 恢復購買功能
- [ ] 網絡不可用時的優雅降級

### **3. 主界面 (All Hands - 完全離線)**
- [ ] 手牌列表顯示 (從本地數據庫)
- [ ] 本地篩選功能 (Filter按鈕)
- [ ] 本地搜索功能
- [ ] 手牌詳情預覽
- [ ] 下拉刷新 (刷新本地數據)
- [ ] 分頁加載 (本地數據分頁)

### **4. 新增Session界面 (完全離線)**
- [ ] Location選擇 (預設選項 + 自定義)
- [ ] Date & Time選擇器 (本地時間)
- [ ] Blinds設置 (5/10格式)
- [ ] Currency選擇 (預設貨幣列表)
- [ ] Table Size選擇 (預設選項)
- [ ] Effective Stack輸入
- [ ] Session Tag顏色選擇 (本地顏色庫)
- [ ] "Start Recording Hands"按鈕
- [ ] 本地數據驗證

### **5. 手牌記錄界面 (完全離線)**
- [ ] 底牌選擇器 (撲克牌UI)
- [ ] 位置選擇 (按鈕形式)
- [ ] 公共牌選擇 (Board Cards)
- [ ] Hero牌選擇
- [ ] 動作記錄 (Fold, Call, Raise等)
- [ ] 下注金額輸入
- [ ] 手牌結果記錄
- [ ] 即時本地保存
- [ ] 離線數據驗證

### **6. 牌面選擇器 (完全離線)**
- [ ] 52張撲克牌UI設計 (本地資源)
- [ ] 多選功能
- [ ] 已選牌高亮顯示
- [ ] 清除選擇功能
- [ ] 流暢動畫效果
- [ ] 牌面組合驗證 (本地邏輯)

### **7. Session標籤系統 (完全離線)**
- [ ] 顏色選擇器 (預設顏色庫)
- [ ] 本地標籤管理
- [ ] 自定義標籤名稱
- [ ] 標籤統計 (本地計算)
- [ ] 標籤數據持久化

### **8. 統計分析頁面 (完全離線)**
- [ ] 總體統計 (本地計算)
- [ ] 按位置統計
- [ ] 按時間統計
- [ ] 圖表顯示 (本地渲染)
- [ ] 收益曲線圖
- [ ] 導出數據功能 (CSV/JSON)
- [ ] 統計數據緩存優化

## 🎨 **UI/UX設計 (離線資源)**

### **1. 設計系統**
- [ ] 定義主色調 (藍色系為主)
- [ ] 設計組件庫 (本地組件)
- [ ] 字體系統 (系統字體 SF Pro)
- [ ] 間距系統 (8pt grid)
- [ ] 圓角和陰影規範
- [ ] 本地圖標資源庫

### **2. 深色模式支持**
- [ ] 深色主題配色
- [ ] 自動切換邏輯
- [ ] 所有界面適配
- [ ] 主題設置持久化

### **3. 響應式設計**
- [ ] iPhone各尺寸適配
- [ ] iPad支持 (如需要)
- [ ] 橫屏適配
- [ ] 動態字體支持

## 🔧 **技術實現 (離線優先)**

### **1. MVVM架構**
- [ ] ViewModels for each screen
- [ ] ObservableObject protocols
- [ ] Combine framework integration
- [ ] 本地狀態管理
- [ ] 離線數據綁定

### **2. Navigation (本地導航)**
- [ ] NavigationStack implementation
- [ ] 本地深度鏈接
- [ ] Tab bar navigation
- [ ] Modal presentations
- [ ] 導航狀態持久化

### **3. 數據持久化 (完全離線)**
- [ ] SQLite本地數據庫
- [ ] UserDefaults for settings
- [ ] Keychain for sensitive data
- [ ] 本地文件系統管理
- [ ] 數據備份機制

### **4. 離線優先網絡層**
- [ ] Firebase Analytics (離線緩存)
- [ ] 網絡狀態檢測
- [ ] 離線數據隊列
- [ ] 自動同步機制
- [ ] 錯誤處理和重試

## 📊 **Analytics & 監控 (離線友好)**
- [ ] 本地事件追蹤
- [ ] 離線分析數據緩存
- [ ] 網絡可用時批量上傳
- [ ] 本地崩潰日誌
- [ ] 性能監控 (本地指標)

## 🧪 **測試 (離線場景)**
- [ ] Unit tests for ViewModels
- [ ] 離線功能測試
- [ ] 數據庫測試
- [ ] 網絡斷開場景測試
- [ ] 性能測試 (離線模式)

## 🚀 **發布準備**
- [ ] App Store截圖
- [ ] App Store描述 (強調離線功能)
- [ ] 隱私政策
- [ ] 使用條款
- [ ] 離線功能說明文檔
- [ ] TestFlight beta testing

## 🔄 **離線優化功能**
- [ ] 本地數據壓縮
- [ ] 智能緩存策略
- [ ] 離線模式指示器
- [ ] 數據同步狀態顯示
- [ ] 本地搜索優化

---

## 📝 **離線功能保證**
✅ **完全離線功能:**
- 手牌記錄和編輯
- 統計分析和圖表
- 數據搜索和篩選
- 所有UI交互
- 設置和偏好

🌐 **僅需網絡功能:**
- 訂閱驗證 (初次)
- Analytics上傳 (後台)
- 崩潰報告上傳

**預估開發時間：6-8週**
- 週1-2: 項目設置 + 離線數據庫架構
- 週3-4: 核心離線功能實現
- 週5-6: UI優化 + 離線測試
- 週7-8: 發布準備 + 離線場景優化

---
**進度追蹤:**
 